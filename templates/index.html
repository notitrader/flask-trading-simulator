<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract-Based Trading Simulator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1>Contract-Based Trading Simulator</h1>
        {% if avg_profit is not none %}
            <p>Average Cumulative Profits: ${{ avg_profit }}</p>
            <p>Maximum Drawdown: ${{ max_drawdown }}</p>
            <p>Sharpe Ratio: {{ sharpe_ratio }}</p>
        {% endif %}

        <form method="POST">
            <!-- Campi del form per configurare la simulazione -->
            <!-- (Stesso contenuto del form precedente) -->
            <button type="submit" class="btn btn-primary">Run Simulation</button>
        </form>

        {% if df_combined_html %}
            <h2 class="mt-5">Simulation Results</h2>
            <div>{{ df_combined_html|safe }}</div>
        {% else %}
            <p class="mt-5">No data available to display.</p>
        {% endif %}

        {% if graph_image %}
            <h2 class="mt-5">Cumulative Profit Chart</h2>
            <img src="data:image/png;base64,{{ graph_image }}" class="img-fluid" alt="Cumulative Profit Chart">
        {% endif %}

        {% if df_combined_html %}
            <form method="POST" action="/download">
                <input type="hidden" name="csv_data" value="{{ df_combined_html }}">
                <button type="submit" class="btn btn-secondary mt-3">Download as CSV</button>
            </form>
        {% endif %}
    </div>
</body>
</html>
